(this["webpackJsonppitanga-frontend"]=this["webpackJsonppitanga-frontend"]||[]).push([[0],{128:function(e,t,n){"use strict";var o=n(14),r={host:"marceloleite2604-pitanga.herokuapp.com",port:80,path:"/pitanga"};t.a=Object(o.a)({},r)},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(14),r=n(250),a=n(7),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.attendees,i=e.votingStatus,u=n.map((function(e){return Object(a.createAttendee)(e)}));return{id:t,attendees:u,votingStatus:i,findAttendeeByUser:function(e){if(0!==this.attendees.length&&e)return this.attendees.filter((function(t){return t.user.id===e.id}))[0]},sortAttendeesByJoinedAtWithUserFirst:function(e){var t=Object(r.a)(this.attendees);return t.sort((function(t,n){return t.user.id===e.id?-1:n.user.id===e.id?1:t.joinedAt-n.joinedAt})),Object(o.a)(Object(o.a)({},this),{},{attendees:t})},removeAttendeeByUserId:function(e){return 0!==this.attendees.length&&e?Object(o.a)(Object(o.a)({},this),{},{attendees:this.attendees.filter((function(t){return t.user.id!==e}))}):Object(o.a)({},this)}}}},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return{id:t}}},167:function(e,t,n){"use strict";var o=n(168);n.o(o,"EventType")&&n.d(t,"EventType",(function(){return o.EventType})),n.o(o,"ToastType")&&n.d(t,"ToastType",(function(){return o.ToastType})),n.o(o,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return o.VotingStatus})),n.o(o,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return o.buildAttendeeLeftRoomEvent})),n.o(o,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return o.buildAttendeeVotedEvent})),n.o(o,"buildCheckRoomExists")&&n.d(t,"buildCheckRoomExists",(function(){return o.buildCheckRoomExists})),n.o(o,"buildCreateRoomEvent")&&n.d(t,"buildCreateRoomEvent",(function(){return o.buildCreateRoomEvent})),n.o(o,"buildJoinUserEvent")&&n.d(t,"buildJoinUserEvent",(function(){return o.buildJoinUserEvent})),n.o(o,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return o.buildResetRoomEvent})),n.o(o,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return o.buildRevealVotesEvent})),n.o(o,"createAttendee")&&n.d(t,"createAttendee",(function(){return o.createAttendee})),n.o(o,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return o.createChartPoint})),n.o(o,"createVote")&&n.d(t,"createVote",(function(){return o.createVote}));var r=n(36);n.d(t,"EventType",(function(){return r.a}));var a=n(169);n.d(t,"buildCheckRoomExists",(function(){return a.a}));var i=n(170);n.d(t,"buildCreateRoomEvent",(function(){return i.a}));var u=n(171);n.o(u,"ToastType")&&n.d(t,"ToastType",(function(){return u.ToastType})),n.o(u,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return u.VotingStatus})),n.o(u,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return u.buildAttendeeLeftRoomEvent})),n.o(u,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return u.buildAttendeeVotedEvent})),n.o(u,"buildJoinUserEvent")&&n.d(t,"buildJoinUserEvent",(function(){return u.buildJoinUserEvent})),n.o(u,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return u.buildResetRoomEvent})),n.o(u,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return u.buildRevealVotesEvent})),n.o(u,"createAttendee")&&n.d(t,"createAttendee",(function(){return u.createAttendee})),n.o(u,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return u.createChartPoint})),n.o(u,"createVote")&&n.d(t,"createVote",(function(){return u.createVote}));var c=n(172);n.d(t,"buildJoinUserEvent",(function(){return c.a}));var d=n(173);n.o(d,"ToastType")&&n.d(t,"ToastType",(function(){return d.ToastType})),n.o(d,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return d.VotingStatus})),n.o(d,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return d.buildAttendeeLeftRoomEvent})),n.o(d,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return d.buildAttendeeVotedEvent})),n.o(d,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return d.buildResetRoomEvent})),n.o(d,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return d.buildRevealVotesEvent})),n.o(d,"createAttendee")&&n.d(t,"createAttendee",(function(){return d.createAttendee})),n.o(d,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return d.createChartPoint})),n.o(d,"createVote")&&n.d(t,"createVote",(function(){return d.createVote}));var s=n(174);n.o(s,"ToastType")&&n.d(t,"ToastType",(function(){return s.ToastType})),n.o(s,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return s.VotingStatus})),n.o(s,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return s.buildAttendeeLeftRoomEvent})),n.o(s,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return s.buildAttendeeVotedEvent})),n.o(s,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return s.buildResetRoomEvent})),n.o(s,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return s.buildRevealVotesEvent})),n.o(s,"createAttendee")&&n.d(t,"createAttendee",(function(){return s.createAttendee})),n.o(s,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return s.createChartPoint})),n.o(s,"createVote")&&n.d(t,"createVote",(function(){return s.createVote}));var l=n(175);n.o(l,"ToastType")&&n.d(t,"ToastType",(function(){return l.ToastType})),n.o(l,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return l.VotingStatus})),n.o(l,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return l.buildAttendeeLeftRoomEvent})),n.o(l,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return l.buildAttendeeVotedEvent})),n.o(l,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return l.buildResetRoomEvent})),n.o(l,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return l.buildRevealVotesEvent})),n.o(l,"createAttendee")&&n.d(t,"createAttendee",(function(){return l.createAttendee})),n.o(l,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return l.createChartPoint})),n.o(l,"createVote")&&n.d(t,"createVote",(function(){return l.createVote}));var b=n(176);n.o(b,"ToastType")&&n.d(t,"ToastType",(function(){return b.ToastType})),n.o(b,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return b.VotingStatus})),n.o(b,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return b.buildAttendeeLeftRoomEvent})),n.o(b,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return b.buildAttendeeVotedEvent})),n.o(b,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return b.buildResetRoomEvent})),n.o(b,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return b.buildRevealVotesEvent})),n.o(b,"createAttendee")&&n.d(t,"createAttendee",(function(){return b.createAttendee})),n.o(b,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return b.createChartPoint})),n.o(b,"createVote")&&n.d(t,"createVote",(function(){return b.createVote}));var v=n(177);n.o(v,"ToastType")&&n.d(t,"ToastType",(function(){return v.ToastType})),n.o(v,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return v.VotingStatus})),n.o(v,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return v.buildAttendeeLeftRoomEvent})),n.o(v,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return v.buildAttendeeVotedEvent})),n.o(v,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return v.buildResetRoomEvent})),n.o(v,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return v.buildRevealVotesEvent})),n.o(v,"createAttendee")&&n.d(t,"createAttendee",(function(){return v.createAttendee})),n.o(v,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return v.createChartPoint})),n.o(v,"createVote")&&n.d(t,"createVote",(function(){return v.createVote}));var f=n(178);n.o(f,"ToastType")&&n.d(t,"ToastType",(function(){return f.ToastType})),n.o(f,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return f.VotingStatus})),n.o(f,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return f.buildAttendeeLeftRoomEvent})),n.o(f,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return f.buildAttendeeVotedEvent})),n.o(f,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return f.buildResetRoomEvent})),n.o(f,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return f.buildRevealVotesEvent})),n.o(f,"createAttendee")&&n.d(t,"createAttendee",(function(){return f.createAttendee})),n.o(f,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return f.createChartPoint})),n.o(f,"createVote")&&n.d(t,"createVote",(function(){return f.createVote}));var m=n(179);n.o(m,"ToastType")&&n.d(t,"ToastType",(function(){return m.ToastType})),n.o(m,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return m.VotingStatus})),n.o(m,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return m.buildAttendeeLeftRoomEvent})),n.o(m,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return m.buildAttendeeVotedEvent})),n.o(m,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return m.buildResetRoomEvent})),n.o(m,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return m.buildRevealVotesEvent})),n.o(m,"createAttendee")&&n.d(t,"createAttendee",(function(){return m.createAttendee})),n.o(m,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return m.createChartPoint})),n.o(m,"createVote")&&n.d(t,"createVote",(function(){return m.createVote}));var j=n(180);n.d(t,"buildAttendeeVotedEvent",(function(){return j.a}));var O=n(181);n.d(t,"buildRevealVotesEvent",(function(){return O.a}));var p=n(182);n.d(t,"buildResetRoomEvent",(function(){return p.a}));var R=n(183);n.d(t,"buildAttendeeLeftRoomEvent",(function(){return R.a}))},168:function(e,t){},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(e){return{type:o.a.CheckRoomExists,payload:{room:e}}}},170:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(e){return{type:o.a.CreateRoom,payload:{user:e}}}},171:function(e,t){},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(e,t){return{type:o.a.JoinUser,payload:{user:e,room:t}}}},173:function(e,t){},174:function(e,t){},175:function(e,t){},176:function(e,t){},177:function(e,t){},178:function(e,t){},179:function(e,t){},180:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(e){return{type:o.a.AttendeeVoted,payload:{attendee:e}}}},181:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(){return{type:o.a.RevealVotes}}},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(){return{type:o.a.ResetRoom}}},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(36);function r(e){return{type:o.a.AttendeeLeftRoom,payload:{attendee:e}}}},184:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(7),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,n=e.icon,r=e.joinedAt,a=e.roomOwner,i=e.vote;return{user:Object(o.createUser)(t),icon:n,joinedAt:r,roomOwner:a,vote:i,createChartPoint:function(){var e,t;return{effort:(null===(e=this.vote)||void 0===e?void 0:e.effort)||0,value:(null===(t=this.vote)||void 0===t?void 0:t.value)||0,label:this.icon}}}}},185:function(e,t){},186:function(e,t){},187:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(e,t,n){return{value:Math.round(e),effort:Math.round(t),label:n}}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(e,t){return{value:Math.round(e),effort:Math.round(t)}}},189:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.Open="open",e.Closed="closed"}(o||(o={}))},190:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.INFORMATION="info",e.SUCCESS="success",e.WARNING="warn",e.ERROR="error"}(o||(o={}))},227:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var o=n(9),r=n(0),a=n(132),i=n(228),u=n(128);function c(t){var n=new i.w3cwebsocket(function(){var e="https:"===location.protocol?"wss:":"ws:";return"".concat(e,"//").concat(u.a.host,":").concat(u.a.port).concat(u.a.path)}());return n.onopen=function(){t.$connected.next(!0)},n.onclose=function(){t.$connected.next(!1)},n.onmessage=function(n){if(n.data instanceof e||n.data instanceof ArrayBuffer)throw new Error("Unsuported message data type.");var o=JSON.parse(n.data);t.$in.next(o)},n}var d=function(){var e=Object(r.useState)({$connected:new a.a,$in:new a.a,$out:new a.a,$toast:new a.a}),t=Object(o.a)(e,1)[0],n=Object(r.useState)((function(){return c(t)})),i=Object(o.a)(n,1)[0];return Object(r.useEffect)((function(){t.$out.subscribe((function(e){console.log('Sending event "'.concat(e.type,'"')),i.send(JSON.stringify(e))}))}),[]),t}}).call(this,n(277).Buffer)},36:function(e,t,n){"use strict";var o;n.d(t,"a",(function(){return o})),function(e){e.CreateUser="create-user",e.UserCreated="user-created",e.MaxUsersReached="max-users-reached",e.JoinUser="join-user",e.UserJoined="user-joined",e.MaxRoomUsersReached="max-room-users-reached",e.CreateRoom="create-room",e.RoomCreated="room-created",e.MaxRoomsReached="max-rooms-reached",e.CheckRoomExists="check-room-exists",e.UserDropped="user-dropped",e.AttendeeVoted="attendee-voted",e.ResetRoom="reset-room",e.RevealVotes="reveal-votes",e.AttendeeLeftRoom="attendee-left-room"}(o||(o={}))},420:function(e,t,n){"use strict";n.r(t);var o=n(23),r=n(93),a=(n(270),n(451)),i=n(452),u=n(453),c=n(0),d=n(248),s=n(3),l=function(e){var t,n=e.children,o=Object(a.a)("(prefers-color-scheme: dark)"),r=(t=o,Object(c.useMemo)((function(){return Object(d.a)({palette:{type:t?"dark":"light",primary:{main:"#9fdc93"},secondary:{main:"#C0A287"}}})}),[t]));return Object(s.jsxs)(i.a,{theme:r,children:[Object(s.jsx)(u.a,{}),n]})},b=n(9),v=n(455),f=n(25),m=n(468),j=function(){return Object(s.jsx)(m.a,{component:v.a,display:{md:"block",xs:"none"}})},O=n(425),p=n(423),R=Object(O.a)(Object(p.a)({container:{padding:"2vh 2vw"}})),E=function(e){var t=e.children,n=R();return Object(s.jsxs)(v.a,{container:!0,alignItems:"center",justify:"center",spacing:0,className:n.container,children:[Object(s.jsx)(j,{}),Object(s.jsx)(v.a,{item:!0,md:10,xs:12,children:t}),Object(s.jsx)(j,{})]})},h=n(467),y=n(470),x=n(456),V=n(7),g=function(e){var t=e.xs,n=e.alignItems,o=e.children;return Object(s.jsx)(v.a,{container:!0,item:!0,xs:t,direction:"column",justify:"flex-start",alignItems:n||"center",children:o})},A=Object(O.a)(Object(p.a)({joinRooomButton:{marginTop:"16px"}})),C=function(e){var t=e.data,n=t.connected,o=t.user,r=t.subjects,a=Object(c.useState)(),i=Object(b.a)(a,2),u=i[0],d=i[1],l=Object(f.f)(),m=Object(c.useCallback)((function(){l.push("".concat(u))}),[l,u]),j=Object(c.useCallback)((function(e){return!!e&&(8===e.length&&!isNaN(parseInt(e)))}),[]),O=A(),p=!n||!o||!j(u);return Object(s.jsxs)(v.a,{container:!0,spacing:2,alignItems:"center",style:{flexGrow:0},children:[Object(s.jsx)(g,{xs:6,alignItems:"flex-end",children:Object(s.jsx)(h.a,{id:"roomNumber",label:"Room number",inputProps:{maxLength:"8"},onChange:function(e){return d(e.target.value)}})}),Object(s.jsx)(g,{xs:6,alignItems:"flex-start",children:Object(s.jsx)(y.a,{variant:"contained",color:"primary",disabled:p,onClick:m,className:O.joinRooomButton,children:"Join Room"})}),Object(s.jsx)(g,{xs:12,children:Object(s.jsx)(x.a,{children:"Or"})}),Object(s.jsx)(g,{xs:12,children:Object(s.jsx)(y.a,{variant:"contained",color:"primary",disabled:!n||!o,onClick:function(){o&&r.$out.next(Object(V.buildCreateRoomEvent)(o))},children:"Create room"})})]})},T=n(227),k=n(14),S=n(43),w=function(e){var t=function(e){var t=Object(b.a)(e,2),n=t[0],o=t[1];return Object(c.useCallback)((function(e){var t;if((null===(t=n.room)||void 0===t?void 0:t.attendees)&&e.payload){var r=Object(V.createAttendee)(e.payload.attendee),a=n.room.removeAttendeeByUserId(r.user.id);a.attendees.push(r),a.votingStatus=e.payload.votingStatus,o((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:a})}))}}),[n.room])}(e),n=function(e){var t=Object(b.a)(e,2)[1],n=Object(f.f)();return Object(c.useCallback)((function(e){e.payload&&(t((function(t){var n,o;return Object(k.a)(Object(k.a)({},t),{},{room:Object(V.createRoom)(null===(n=e.payload)||void 0===n?void 0:n.room),attendee:Object(V.createAttendee)(null===(o=e.payload)||void 0===o?void 0:o.room.attendees[0])})})),n.push("/".concat(e.payload.room.id)))}),[n])}(e),o=function(e){var t=Object(b.a)(e,2)[1];return Object(c.useCallback)((function(e){e.payload&&t((function(t){var n;return Object(k.a)(Object(k.a)({},t),{},{user:null===(n=e.payload)||void 0===n?void 0:n.user})}))}),[])}(e),r=function(e){var t=Object(b.a)(e,2),n=t[0],o=t[1],r=Object(f.f)();return Object(c.useCallback)((function(e){if(e.payload)if(e.payload.exists){var t=Object(V.createRoom)(e.payload.room);o((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:t})}))}else o((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:void 0})})),r.push("/")}),[r,n.room])}(e),a=function(e){var t=Object(b.a)(e,1)[0];return Object(c.useCallback)((function(){t.subjects.$connected.next(!1)}),[])}(e),i=function(e){var t=Object(b.a)(e,2),n=t[0],o=t[1];return Object(c.useCallback)((function(e){if(n.room&&e.payload&&n.room.id===e.payload.room.id&&(o((function(t){var n;return Object(k.a)(Object(k.a)({},t),{},{room:Object(V.createRoom)(null===(n=e.payload)||void 0===n?void 0:n.room)})})),!n.attendee)){var t=e.payload.room.attendees.find((function(e){var t;return(null===e||void 0===e?void 0:e.user.id)===(null===(t=n.user)||void 0===t?void 0:t.id)}));t&&o((function(e){return Object(k.a)(Object(k.a)({},e),{},{attendee:Object(V.createAttendee)(t)})}))}}),[n.room,n.attendee,n.user])}(e),u=function(e){var t=Object(b.a)(e,2),n=t[0],o=t[1];return Object(c.useCallback)((function(e){if(n.room&&e.payload){var t=n.room.attendees.find((function(t){var n;return t.user.id===(null===(n=e.payload)||void 0===n?void 0:n.user.id)})),r=n.room.attendees.filter((function(e){return e!==t})),a={message:"".concat(null===t||void 0===t?void 0:t.icon," dropped."),type:V.ToastType.INFORMATION};if(e.payload.newRoomOwner){var i=r.find((function(t){var n,o;return t.user.id===(null===(n=e.payload)||void 0===n||null===(o=n.newRoomOwner)||void 0===o?void 0:o.user.id)}));i&&(i.roomOwner=!0,a.message="".concat(a.message," New room owner is ").concat(null===i||void 0===i?void 0:i.icon,"."))}n.subjects.$toast.next(a),o((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:Object(k.a)(Object(k.a)({},e.room),{},{attendees:r})})}))}}),[n.room])}(e),d=function(e){var t=Object(b.a)(e,2)[1];return Object(c.useCallback)((function(){t((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:Object(k.a)(Object(k.a)({},e.room),{},{votingStatus:V.VotingStatus.Closed})})}))}),[])}(e),s=function(e){var t=Object(b.a)(e,2)[1];return Object(c.useCallback)((function(e){if(e.payload){var n=Object(V.createRoom)(e.payload.room);t((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:n})}))}}),[])}(e),l=function(e){var t=Object(b.a)(e,2),n=t[0],o=t[1];return Object(c.useCallback)((function(e){var t;if(e.payload)if(n.attendee&&n.attendee.user.id===e.payload.attendee.user.id)o((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:void 0,attendee:void 0})}));else if(null===(t=n.room)||void 0===t?void 0:t.attendees){var r=n.room.removeAttendeeByUserId(e.payload.attendee.user.id);if(e.payload.newRoomOwner){var a=Object(V.createAttendee)(e.payload.newRoomOwner);(r=r.removeAttendeeByUserId(e.payload.newRoomOwner.user.id)).attendees.push(a);var i={message:"".concat(e.payload.attendee.icon," left. New room owner is ").concat(e.payload.newRoomOwner.icon,"."),type:V.ToastType.INFORMATION};n.subjects.$toast.next(i)}o((function(e){return Object(k.a)(Object(k.a)({},e),{},{room:r})}))}}),[n.attendee,n.room])}(e),v=Object(c.useMemo)((function(){var e;return e={},Object(S.a)(e,V.EventType.UserCreated,o),Object(S.a)(e,V.EventType.CheckRoomExists,r),Object(S.a)(e,V.EventType.AttendeeVoted,t),Object(S.a)(e,V.EventType.RoomCreated,n),Object(S.a)(e,V.EventType.ResetRoom,s),Object(S.a)(e,V.EventType.RevealVotes,d),Object(S.a)(e,V.EventType.UserDropped,u),Object(S.a)(e,V.EventType.UserJoined,i),Object(S.a)(e,V.EventType.MaxUsersReached,a),Object(S.a)(e,V.EventType.AttendeeLeftRoom,l),e}),[t,n,o,r,a,i,u,d,s,l]);return Object(c.useCallback)((function(e){console.log('Received event "'.concat(e.type,'".'));var t=v[e.type];t?t(e):console.log("[ERROR] Don't know how to handle \"".concat(e.type,'" event.'))}),[v])},U=n(76),L={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0},P=function(e){var t=Object(c.useState)(),n=Object(b.a)(t,2),o=n[0],r=n[1],a=function(e){var t=Object(b.a)(e,2),n=t[0],o=t[1],r=Object(c.useCallback)((function(e){n.connected?e||n.subjects.$toast.next({message:"Disconnected from server.",type:V.ToastType.WARNING}):e||n.subjects.$toast.next({message:"Could not connect with server.",type:V.ToastType.ERROR}),o((function(t){return Object(k.a)(Object(k.a)({},t),{},{connected:e})}))}),[]);return[w(e),r]}(e),i=Object(b.a)(a,2),u=i[0],d=i[1],s=Object(c.useCallback)((function(e){switch(e.type){case V.ToastType.INFORMATION:U.b.info(e.message,L);break;case V.ToastType.ERROR:U.b.error(e.message,L);break;case V.ToastType.WARNING:U.b.warn(e.message,L);break;default:Object(U.b)(e.message,L)}}),[]),l=Object(b.a)(e,1)[0];Object(c.useEffect)((function(){var e,t,n;null===o||void 0===o||null===(e=o.events)||void 0===e||e.unsubscribe(),null===o||void 0===o||null===(t=o.connection)||void 0===t||t.unsubscribe(),null===o||void 0===o||null===(n=o.toasts)||void 0===n||n.unsubscribe();var a=l.subjects.$in.subscribe(u),i=l.subjects.$connected.subscribe(d),c=l.subjects.$toast.subscribe(s);return r({events:a,connection:i,toasts:c}),function(){var e,t;null===o||void 0===o||null===(e=o.events)||void 0===e||e.unsubscribe(),null===o||void 0===o||null===(t=o.connection)||void 0===t||t.unsubscribe()}}),[u,d])},N=function(e){var t=Object(c.useState)(),n=Object(b.a)(t,2)[1];Object(c.useCallback)((function(){n({})}),[e])},I=n(252),J=n(459),B=n(460),$=n(471),M=n(457),F=n(458),W=Object(M.a)(Object(F.a)({muiSlider:{padding:"4px 0px"},typography:{fontSize:"0.8rem"},muiSliderGridItem:{padding:"4px 0px"}})),D=function(e){var t=e.label,n=e.value,o=e.hide,r=W();return N([n,o]),o?Object(s.jsx)(s.Fragment,{}):Object(s.jsxs)(v.a,{container:!0,alignItems:"center",spacing:2,children:[Object(s.jsx)(v.a,{item:!0,xs:3,children:Object(s.jsxs)(x.a,{align:"right",className:r.typography,children:[t,":"]})}),Object(s.jsx)(v.a,{item:!0,xs:7,className:r.muiSliderGridItem,children:Object(s.jsx)($.a,{disabled:!0,marks:!0,min:0,max:6,defaultValue:n,className:r.muiSlider},"".concat(t,"-").concat(n,"-").concat(String(o)))}),Object(s.jsx)(v.a,{item:!0,xs:2,children:Object(s.jsx)(x.a,{align:"left",className:r.typography,children:n})})]})},G=n(33),z=Object(M.a)((function(e){return Object(F.a)({attendeeCard:{display:"flex",flexDirection:"column",justifyContent:"center"},attendeeCardContent:{padding:"4px",minHeight:"48px","&:last-child":{paddingBottom:"4px"}},currentUser:{background:e.palette.primary.dark},currentUserVoted:{background:Object(G.d)(e.palette.primary.dark,.2)},otherUserVoted:{background:Object(G.d)(e.palette.background.paper,.2)},iconTypography:{fontSize:"1.5rem"}})})),K=function(e){var t,n,o=e.user,r=e.room,a=e.attendee,i=z();N([o,r,a]);var u=Object(c.useMemo)((function(){return a.user.id!==o.id&&r.votingStatus===V.VotingStatus.Open||!a.vote}),[a,r.votingStatus]),d=i.attendeeCard;return o.id===a.user.id?d+=" ".concat(a.vote?i.currentUserVoted:i.currentUser):a.vote&&(d+=" ".concat(i.otherUserVoted)),Object(s.jsx)(J.a,{className:d,children:Object(s.jsx)(B.a,{className:i.attendeeCardContent,children:Object(s.jsxs)(v.a,{container:!0,children:[Object(s.jsx)(v.a,{container:!0,item:!0,alignContent:"center",justify:"center",xs:2,children:Object(s.jsx)(x.a,{align:"left",className:i.iconTypography,children:a.icon})}),Object(s.jsxs)(v.a,{container:!0,item:!0,xs:10,children:[Object(s.jsx)(D,{label:"Effort",hide:u,value:(null===(t=a.vote)||void 0===t?void 0:t.effort)||0}),Object(s.jsx)(D,{label:"Value",hide:u,value:(null===(n=a.vote)||void 0===n?void 0:n.value)||0})]})]})})})},H=function(e){var t=e.room,n=e.user;return N([t,n]),Object(s.jsx)(v.a,{container:!0,alignItems:"flex-start",justify:"flex-start",spacing:1,children:t.sortAttendeesByJoinedAtWithUserFirst(n).attendees.map((function(e,o){return Object(s.jsx)(v.a,{item:!0,xs:12,children:Object(s.jsx)(K,{user:n,room:t,attendee:e})},"attendee-grid-".concat(o))}))})},q=function(e){var t,n,o=e.data,r=function(e){return{onResetButtonClick:Object(c.useCallback)((function(){e.subjects.$out.next(Object(V.buildResetRoomEvent)())}),[e]),onRevealButtonClick:Object(c.useCallback)((function(){e.subjects.$out.next(Object(V.buildRevealVotesEvent)())}),[e])}}(o),a=r.onResetButtonClick,i=r.onRevealButtonClick,u=Object(c.useMemo)((function(){var e,t;return console.log("Attendees: ".concat(JSON.stringify(null===(e=o.room)||void 0===e?void 0:e.attendees))),!!(null===(t=o.room)||void 0===t?void 0:t.attendees)&&0===o.room.attendees.filter((function(e){return e.vote})).length}),[null===(t=o.room)||void 0===t?void 0:t.attendees]);return Object(s.jsxs)(v.a,{container:!0,children:[Object(s.jsx)(v.a,{item:!0,xs:2}),Object(s.jsx)(v.a,{item:!0,xs:2,children:Object(s.jsx)(y.a,{variant:"contained",onClick:a,children:"Reset"})}),Object(s.jsx)(v.a,{item:!0,xs:2,children:Object(s.jsx)(y.a,{variant:"contained",disabled:u||(null===(n=o.room)||void 0===n?void 0:n.votingStatus)===V.VotingStatus.Closed,onClick:i,children:"Reveal"})})]})},Q=n(461),X=n(462),Y=n(246),Z=n(247),_=n(237),ee=n(466),te=n(251),ne=n(244),oe=n(105),re=function(){var e=function(e,t,n){var o=Object(c.useState)(e),r=Object(b.a)(o,2),a=r[0],i=r[1];return[a,Object(I.a)(i,t,n)]}(void 0,30,!0),t=Object(b.a)(e,2),n=t[0],o=t[1];return[n,Object(c.useCallback)((function(e){if(e){var t=e.xValue,n=e.yValue;o(Object(V.createChartPoint)(t,n))}}),[o])]},ae=Object(M.a)((function(e){return Object(F.a)({responsiveContainer:{borderRadius:"10px",background:e.palette.grey[800]}})})),ie=0,ue=6,ce=(ie+ue)/2,de=[ie,ue],se=Array.from({length:ue},(function(e,t){return t})).filter((function(e){return e!==ce})),le=function(e){var t=e.active,n=e.payload,o=e.points;if(t&&n&&n[0]){var r=n[0].payload,a=o.filter((function(e){return e.effort===r.effort&&e.value===r.value})).map((function(e){return e.label}));if(a&&a.length>1){var i=Math.round(Math.sqrt(a.length)),u=a.reduce((function(e,t,n){return e+=t,n%i===0&&(e+="\n"),e}));return Object(s.jsx)("div",{style:{backgroundColor:"#0008",fontSize:"0.8rem",letterSpacing:"0.5rem",padding:"0.5rem 0rem 0.5rem 0.5rem",borderRadius:"0.1rem",whiteSpace:"pre-wrap"},children:u})}}return Object(s.jsx)(s.Fragment,{})},be=function(e){var t=e.x,n=e.y,o=e.width,r=e.value;return"number"!==typeof t||"number"!==typeof n||"number"!==typeof o?Object(s.jsx)(s.Fragment,{}):Object(s.jsx)("text",{x:t+o/2,y:n+o/2,width:o,height:o,fill:"#fff",textAnchor:"middle",fontSize:"1.5rem",dominantBaseline:"middle",children:Object(s.jsx)("tspan",{children:r})})},ve=n(64),fe=function(e){var t,n,o,r=e.data,a=Object(ve.a)(),i=function(e){return Object(c.useMemo)((function(){var t;if((null===(t=e.room)||void 0===t?void 0:t.attendees)&&e.user){if(e.room.votingStatus!==V.VotingStatus.Open)return e.room.attendees.filter((function(e){return e.vote})).map((function(e){return e.createChartPoint()}));var n,o=null===(n=e.room)||void 0===n?void 0:n.findAttendeeByUser(e.user);if(null===o||void 0===o?void 0:o.vote)return[o.createChartPoint()]}return[]}),[e.room,e.user])}(r),u=re(),d=Object(b.a)(u,2),l=d[0],v=d[1],f=function(e){return Object(c.useCallback)((function(t){var n;if(t&&e.user&&(null===(n=e.room)||void 0===n?void 0:n.attendees)&&e.room.votingStatus===V.VotingStatus.Open){var o=t.xValue,r=t.yValue,a=Object(V.createVote)(o,r),i=Object(k.a)(Object(k.a)({},e.attendee),{},{vote:a});e.subjects.$out.next(Object(V.buildAttendeeVotedEvent)(i))}}),[e])}(r);N([null===(t=r.attendee)||void 0===t?void 0:t.vote]);var m=ae(),j=Object(c.useCallback)((function(e){var t=e.reduce((function(e,t){return e.effort+=t.effort,e.value+=t.value,e}),{value:0,effort:0,label:"Mean"});return t.value/=e.length,t.effort/=e.length,[t]}),[]);return Object(s.jsx)(Q.a,{aspect:1.6,width:"99%",className:m.responsiveContainer,children:Object(s.jsxs)(X.a,{margin:{top:40,bottom:40,left:40,right:40},onMouseMove:v,onClick:f,children:[Object(s.jsx)(Y.a,{dataKey:"value",type:"number",axisLine:!1,hide:!1,ticks:se,domain:de,stroke:a.palette.primary.dark}),Object(s.jsx)(Z.a,{dataKey:"effort",type:"number",axisLine:!1,hide:!1,ticks:se,domain:de,stroke:a.palette.primary.dark}),Object(s.jsx)(_.a,{x:ce,stroke:a.palette.primary.dark,strokeWidth:2,label:{position:"insideBottomLeft",value:"Effort",fill:a.palette.primary.dark}}),";",Object(s.jsx)(_.a,{y:ce,stroke:a.palette.primary.dark,strokeWidth:2,label:{position:"insideBottomLeft",value:"Value",fill:a.palette.primary.dark}}),Object(s.jsx)(ee.a,{strokeDasharray:"2 4",stroke:a.palette.grey[400]}),Object(s.jsx)(te.a,{data:i,isAnimationActive:!1,strokeOpacity:1,strokeWidth:10,fill:"#fff",children:Object(s.jsx)(ne.a,{dataKey:"label",fontSize:"4rem",content:Object(s.jsx)(be,{})})}),(null===(n=r.room)||void 0===n?void 0:n.votingStatus)===V.VotingStatus.Open&&l&&Object(s.jsx)(te.a,{data:[l],shape:"cross",rotate:200,strokeWidth:12,strokeOpacity:.5,fillOpacity:1,fill:a.palette.secondary.dark}),(null===(o=r.room)||void 0===o?void 0:o.votingStatus)===V.VotingStatus.Closed&&Object(s.jsx)(te.a,{data:j(i),shape:"cross",rotate:200,strokeWidth:12,strokeOpacity:.5,fillOpacity:1,fill:a.palette.primary.dark}),Object(s.jsx)(oe.a,{content:Object(s.jsx)(le,{points:i})})]})})},me=function(e){var t=e.data;N([t.room]),function(e){var t=Object(c.useState)(),n=Object(b.a)(t,2),o=n[0],r=n[1],a=Object(f.g)().roomId,i=e.connected,u=e.user,d=e.subjects,s=Object(c.useCallback)((function(e){if(e.type===V.EventType.CheckRoomExists){var t=e.payload;u&&t&&t.exists&&d.$out.next(Object(V.buildJoinUserEvent)(u,t.room))}}),[u]);Object(c.useEffect)((function(){if(i&&u)return null===o||void 0===o||o.unsubscribe(),r(d.$in.subscribe(s)),d.$out.next(Object(V.buildCheckRoomExists)({id:parseInt(a)})),function(){return null===o||void 0===o?void 0:o.unsubscribe()}}),[i,u,a])}(t);var n=Object(c.useMemo)((function(){var e;if((null===(e=t.room)||void 0===e?void 0:e.attendees)&&t.user){var n,o=null===(n=t.room)||void 0===n?void 0:n.findAttendeeByUser(t.user);return(null===o||void 0===o?void 0:o.roomOwner)||!1}return!1}),[t]);return Object(s.jsxs)(v.a,{container:!0,direction:"row",spacing:1,children:[Object(s.jsx)(v.a,{item:!0,xs:9,children:Object(s.jsx)(fe,{data:t})}),Object(s.jsx)(v.a,{item:!0,xs:3,children:Object(s.jsx)(s.Fragment,{children:t.user&&t.room&&Object(s.jsx)(H,{user:t.user,room:t.room})})}),Object(s.jsx)(v.a,{item:!0,xs:12,children:n&&Object(s.jsx)(q,{data:t})})]})},je=function(){return Object(s.jsx)(x.a,{variant:"h2",align:"center",style:{textDecoration:"underline",textShadow:"0px 0px 4px #888"},children:"Pitanga"})};function Oe(){var e=function(){var e=Object(T.a)();return Object(c.useState)({connected:!1,subjects:e})}();P(e),function(e){var t,n,o,r=Object(b.a)(e,1)[0],a=Object(f.f)(),i=[null===(t=r.room)||void 0===t?void 0:t.id,r.attendee],u=Object(c.useCallback)((function(e){var t,n,o;console.log("[CB] Checking if user has left the room. Room id: ".concat(null===(t=r.room)||void 0===t?void 0:t.id,", pathname: ").concat(e.pathname)),(null===(n=r.room)||void 0===n?void 0:n.id)&&(e.pathname.match(new RegExp("/".concat(null===(o=r.room)||void 0===o?void 0:o.id)))||(console.log('[CB] Sending "attendee-left-room" event.'),r.attendee&&r.subjects.$out.next(Object(V.buildAttendeeLeftRoomEvent)(r.attendee))))}),[null===(n=r.room)||void 0===n?void 0:n.id,r.attendee]),d=Object(c.useState)({}),s=Object(b.a)(d,2),l=s[0],v=s[1];l.callback?(null===(o=l.deps)||void 0===o?void 0:o.every((function(e,t){return e===i[t]})))||(l.callback(),v({callback:a.listen(u),deps:i})):v({callback:a.listen(u),deps:i})}(e);var t=Object(b.a)(e,1)[0];return Object(s.jsx)(E,{children:Object(s.jsxs)(v.a,{container:!0,direction:"row",spacing:1,children:[Object(s.jsx)(v.a,{item:!0,xs:12,children:Object(s.jsx)(je,{})}),Object(s.jsx)(v.a,{item:!0,xs:12,children:Object(s.jsxs)(f.c,{children:[Object(s.jsx)(f.a,{path:"/:roomId",children:Object(s.jsx)(me,{data:t})}),Object(s.jsx)(f.a,{path:"/",children:Object(s.jsx)(C,{data:t})})]})})]})})}n(419);Object(o.render)(Object(s.jsxs)(r.a,{children:[Object(s.jsx)(l,{children:Object(s.jsx)(Oe,{})}),Object(s.jsx)(U.a,{position:"bottom-right"})]}),document.getElementById("root"))},7:function(e,t,n){"use strict";var o=n(165);n.d(t,"createRoom",(function(){return o.a}));var r=n(166);n.d(t,"createUser",(function(){return r.a}));var a=n(167);n.o(a,"EventType")&&n.d(t,"EventType",(function(){return a.EventType})),n.o(a,"ToastType")&&n.d(t,"ToastType",(function(){return a.ToastType})),n.o(a,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return a.VotingStatus})),n.o(a,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return a.buildAttendeeLeftRoomEvent})),n.o(a,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return a.buildAttendeeVotedEvent})),n.o(a,"buildCheckRoomExists")&&n.d(t,"buildCheckRoomExists",(function(){return a.buildCheckRoomExists})),n.o(a,"buildCreateRoomEvent")&&n.d(t,"buildCreateRoomEvent",(function(){return a.buildCreateRoomEvent})),n.o(a,"buildJoinUserEvent")&&n.d(t,"buildJoinUserEvent",(function(){return a.buildJoinUserEvent})),n.o(a,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return a.buildResetRoomEvent})),n.o(a,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return a.buildRevealVotesEvent})),n.o(a,"createAttendee")&&n.d(t,"createAttendee",(function(){return a.createAttendee})),n.o(a,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return a.createChartPoint})),n.o(a,"createVote")&&n.d(t,"createVote",(function(){return a.createVote}));var i=n(184);n.d(t,"createAttendee",(function(){return i.a}));var u=n(185);n.o(u,"EventType")&&n.d(t,"EventType",(function(){return u.EventType})),n.o(u,"ToastType")&&n.d(t,"ToastType",(function(){return u.ToastType})),n.o(u,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return u.VotingStatus})),n.o(u,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return u.buildAttendeeLeftRoomEvent})),n.o(u,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return u.buildAttendeeVotedEvent})),n.o(u,"buildCheckRoomExists")&&n.d(t,"buildCheckRoomExists",(function(){return u.buildCheckRoomExists})),n.o(u,"buildCreateRoomEvent")&&n.d(t,"buildCreateRoomEvent",(function(){return u.buildCreateRoomEvent})),n.o(u,"buildJoinUserEvent")&&n.d(t,"buildJoinUserEvent",(function(){return u.buildJoinUserEvent})),n.o(u,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return u.buildResetRoomEvent})),n.o(u,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return u.buildRevealVotesEvent})),n.o(u,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return u.createChartPoint})),n.o(u,"createVote")&&n.d(t,"createVote",(function(){return u.createVote}));var c=n(186);n.o(c,"EventType")&&n.d(t,"EventType",(function(){return c.EventType})),n.o(c,"ToastType")&&n.d(t,"ToastType",(function(){return c.ToastType})),n.o(c,"VotingStatus")&&n.d(t,"VotingStatus",(function(){return c.VotingStatus})),n.o(c,"buildAttendeeLeftRoomEvent")&&n.d(t,"buildAttendeeLeftRoomEvent",(function(){return c.buildAttendeeLeftRoomEvent})),n.o(c,"buildAttendeeVotedEvent")&&n.d(t,"buildAttendeeVotedEvent",(function(){return c.buildAttendeeVotedEvent})),n.o(c,"buildCheckRoomExists")&&n.d(t,"buildCheckRoomExists",(function(){return c.buildCheckRoomExists})),n.o(c,"buildCreateRoomEvent")&&n.d(t,"buildCreateRoomEvent",(function(){return c.buildCreateRoomEvent})),n.o(c,"buildJoinUserEvent")&&n.d(t,"buildJoinUserEvent",(function(){return c.buildJoinUserEvent})),n.o(c,"buildResetRoomEvent")&&n.d(t,"buildResetRoomEvent",(function(){return c.buildResetRoomEvent})),n.o(c,"buildRevealVotesEvent")&&n.d(t,"buildRevealVotesEvent",(function(){return c.buildRevealVotesEvent})),n.o(c,"createChartPoint")&&n.d(t,"createChartPoint",(function(){return c.createChartPoint})),n.o(c,"createVote")&&n.d(t,"createVote",(function(){return c.createVote}));var d=n(187);n.d(t,"createChartPoint",(function(){return d.a}));var s=n(188);n.d(t,"createVote",(function(){return s.a}));var l=n(189);n.d(t,"VotingStatus",(function(){return l.a}));var b=n(190);n.d(t,"ToastType",(function(){return b.a}))}},[[420,1,2]]]);
//# sourceMappingURL=main.234771ef.chunk.js.map